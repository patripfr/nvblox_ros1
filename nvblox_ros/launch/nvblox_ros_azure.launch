<?xml version="1.0" encoding="utf-8"?>

<launch>
  <arg name="use_sim_time"  default="false" />
  <arg name="param_file" default="$(find nvblox_ros)/config/full_parameters_azure.yaml"/>
  <arg name="rviz" default="true" />
  <arg name="mask_info_topic"                 default="/rgb/camera_info"/>
  <arg name="mask_img_topic"                  default="/mask/image_raw"/>
  <arg name="depth_info_topic"               default="/depth_to_rgb/camera_info"/>
  <arg name="depth_topic"                    default="/depth_to_rgb/image"/>

  <!-- <node type="rviz" name="rviz" pkg="rviz" args="-d $(find nvblox_ros)/rviz/nvblox_d435i.rviz" if="$(arg rviz)"/> -->
  <node type="rviz" name="rviz_nvblox" pkg="rviz" args="-d $(find nvblox_ros)/rviz/panopt.rviz" if="$(arg rviz)"/>

  <!-- <node pkg="tf2_ros" type="static_transform_publisher" name="static_tf_pub_camera_to_camera_link" args="0 0 0 1.57079 -1.57079 0 camera camera_link" />
  <node pkg="tf2_ros" type="static_transform_publisher" name="static_tf_pub_camera_to_camera_link" args="0 0 0 2.1338 0.3908 0.4626 camera camera_link" /> -->

  <node pkg="nvblox_ros" type="nvblox_human_node" name="nvblox_node" respawn="false" output="screen" >
    <rosparam file="$(arg param_file)"/>

    <!-- Remap color and aligned depth topics -->
    <remap from="depth/image" to="$(arg depth_topic)" />
    <remap from="depth/camera_info" to="$(arg depth_info_topic)" />
    <!-- <remap from="color/image" to="/camera/color/image_raw" />
    <remap from="color/camera_info" to="/camera/color/camera_info" /> -->

    <!-- Remap mask topics to specific classes -->
    <remap from="mask/image" to="$(arg mask_img_topic)" />
    <remap from="mask/camera_info" to="$(arg mask_info_topic)" />

    <!-- Anything here ovewrites the parameters in the config file. -->
    <param name="global_frame" value="map" />
    <param name="use_sim_time" value="$(arg use_sim_time)" />
    <param name="use_lidar" value="false" />
    
  </node>

</launch>
